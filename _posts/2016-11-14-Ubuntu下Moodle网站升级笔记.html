---
layout: post
status: publish
published: true
title: Ubuntu下Moodle网站升级笔记
author:
 yufei.zhou

wordpress_id: 151
wordpress_url: http://donute.com/?p=151
date: '2016-11-14 10:26:19 +0800'
date_gmt: '2016-11-14 02:26:19 +0800'
categories:
- HelloWorld
tags: [Moodle]
comments: []
---
<h2>1、备份原网站文件夹。</h2>
<p>将整个网站文件夹复制到用户主目录下的backup文件夹内，以防网站升级失败用于恢复。</p>
<h2>2、下载新版moodle。</h2>
<p>访问moodle.org，下载最新版的（现在是2.7+），将下载的文件解压，并覆盖原来的网站文件夹。</p>
<h2>3、开始升级。</h2>
<p>在浏览器中访问localhost，提示安装moodle，在这个过程中要指定数据文件夹为原网站的数据文件夹，数据库为原网站的数据库名。提示是否确认升级，确认后开始进行升级要求检查，此时提示现有版本1.9不能直接升级至2.7+，返回第二步，下载2.2版moodle，重复2、3两步。</p>
<h2>4、解决数据库问题。</h2>
<p>在升级2.2的过程中，提示数据库的字符集必须为utf-8，打开ubuntu的终端，修改数据库字符集：输入 mysql –u root –p</p>
<p><wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> 输入密码</p>
<p><wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> use jsjxywklt(此处为需要修改字符集的数据库名)</p>
<p><wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> <wbr /> alert database <wbr /> jsjxywklt character set utf8;回车</p>
<p>数据库字符集修改完成。</p>
<h2>5、回到升级页面。</h2>
<p>回到浏览器中的升级页面，点击重新载入，这次可以看到开始升级了。</p>
<p>升级需要的时间较长，耐心等待。</p>
<p>从1.9升级至2.2以后，再可以重复以上步骤升级至2.7+。</p>
<h2>6、升级完成。</h2>
