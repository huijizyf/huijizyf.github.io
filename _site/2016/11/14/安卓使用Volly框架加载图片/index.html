<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <title>安卓使用Volly框架加载图片，GridView使用LayoutAnimation</title>
  <meta name="viewport" content="width=device-width">

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="/assets/css/style.css" rel="stylesheet" />
  <link href="/assets/css/colors-dark.css" rel="stylesheet" />

</head>

<body>



  <header id="header">
    <h1><a href="/"><i class="icon-sun"></i> Solar Theme</a></h1>
    <p>A stylish blog using the Solarized color palette</p>
  </header>



  <div id="page">



    <div id="sidebar">
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/archives">Archive</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="http://twitter.com/redwall_hp">Twitter</a></li>
          <li><a href="/feed.xml">RSS Feed</a></li>
        </ul>
      </nav>
    </div>



    <div id="content">
      <article class="post">

	
		<h1><a href="/2016/11/14/%E5%AE%89%E5%8D%93%E4%BD%BF%E7%94%A8Volly%E6%A1%86%E6%9E%B6%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87/">安卓使用Volly框架加载图片，GridView使用LayoutAnimation</a></h1>
	

	<div class="post-content"><pre>package com.fabian.testvolly;

import android.graphics.Bitmap;
import android.support.v7.app.ActionBarActivity;
import android.os.Bundle;
import android.util.LruCache;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.AnimationSet;
import android.view.animation.LayoutAnimationControlle<wbr />r;
import android.view.animation.ScaleAnimation;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

import com.android.volley.RequestQueue;
import com.android.volley.toolbox.ImageLoader;
import com.android.volley.toolbox.Volley;

import java.util.ArrayList;


public class MainActivity extends ActionBarActivity {

ArrayList list=new ArrayList&lt;&gt;();
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
for(int i=0;i&lt;&lt;span style="color:#6897bb;"&gt;20;i++)
{
list.add("http://s0.hao123img.com/res/ecom/wph-715.jpg");
}
AnimationSet aset=new AnimationSet(false);
ScaleAnimation sa=new ScaleAnimation(0f,1f,0f,1f,0.5f,0.5f);
sa.setDuration(2000);
AlphaAnimation aa=new AlphaAnimation(0f,1f);
aa.setDuration(2000);
aset.addAnimation(sa);
aset.addAnimation(aa);
LayoutAnimationControlle<wbr />r controller = new LayoutAnimationControlle<wbr />r(aset, 0.5f);
controller.setOrder(LayoutAnimationControlle<wbr />r.ORDER_NORMAL);
GridView gv= (GridView) findViewById(R.id.gridView);
gv.setLayoutAnimation(controller);
RequestQueue mQueue = Volley.newRequestQueue(getApplicationContext());
final ImageLoader mImageLoader=new ImageLoader(mQueue,new BitmapCache());
gv.setAdapter(new BaseAdapter() {
@Override
public int getCount() {
return list.size();
}
@Override
public Object getItem(int position) {
return list.get(position);
}
@Override
public long getItemId(int position) {
return position;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
LayoutInflater inflater=LayoutInflater.from(MainActivity.this);
convertView=inflater.inflate(R.layout.item_layout,null);
ImageLoader.ImageListener listener = ImageLoader.getImageListener((ImageView) convertView.findViewById(R.id.imageView), android.R.drawable.ic_menu_rotate, android.R.drawable.ic_delete);
mImageLoader.get(list.get(position), listener);
return convertView;
}
});
mQueue.start();
}
class BitmapCache implements ImageLoader.ImageCache {

private LruCache, Bitmap&gt; cache;

public BitmapCache() {
cache = new LruCache, Bitmap&gt;(8 * 1024 * 1024) {
@Override
protected int sizeOf(String key, Bitmap bitmap) {
return bitmap.getRowBytes() * bitmap.getHeight();
}
};
}
@Override
public Bitmap getBitmap(String url) {
return cache.get(url);
}
@Override
public void putBitmap(String url, Bitmap bitmap) {
cache.put(url, bitmap);
}
}
}<a href="http://photo.blog.sina.com.cn/showpic.html#blogid=8265bd790102vtlh&amp;url=http://album.sina.com.cn/pic/002o3oc9gy6TUt91iEH8b" target="_blank"><img title="安卓使用Volly框架加载图片，GridView使用LayoutAnimation" src="http://s12.sinaimg.cn/mw690/002o3oc9gy6TUt91iEH8b&amp;690" alt="安卓使用Volly框架加载图片，GridView使用LayoutAnimation" width="540" height="960" name="image_operate_48241437127052319" /></a></pre>
</div>

	<p class="meta">Posted on <span class="postdate">Nov 14, 2016</span></p>

</article>
    </div>



  </div>



  <footer id="footer">
    <p class="copyright">Copyright &copy; 2017 Solar Theme. Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme by <a href="http://www.webmaster-source.com">Matt Harzewski</a></p>
  </footer>



  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
  <script src="/assets/js/jquery.mobilemenu.min.js"></script>

  <script>
    $(document).ready(function(){
      $('#sidebar nav ul').mobileMenu({'topOptionText': 'Menu', 'prependTo': '#sidebar nav'});
    });
  </script>



</body>
</html>