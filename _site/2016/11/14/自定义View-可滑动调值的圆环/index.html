<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <title>自定义View 可滑动调值的圆环</title>
  <meta name="viewport" content="width=device-width">

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="/assets/css/style.css" rel="stylesheet" />
  <link href="/assets/css/colors-dark.css" rel="stylesheet" />

</head>

<body>



  <header id="header">
    <h1><a href="/"><i class="icon-sun"></i> Solar Theme</a></h1>
    <p>A stylish blog using the Solarized color palette</p>
  </header>



  <div id="page">



    <div id="sidebar">
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/archives">Archive</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="http://twitter.com/redwall_hp">Twitter</a></li>
          <li><a href="/feed.xml">RSS Feed</a></li>
        </ul>
      </nav>
    </div>



    <div id="content">
      <article class="post">

	
		<h1><a href="/2016/11/14/%E8%87%AA%E5%AE%9A%E4%B9%89View-%E5%8F%AF%E6%BB%91%E5%8A%A8%E8%B0%83%E5%80%BC%E7%9A%84%E5%9C%86%E7%8E%AF/">自定义View 可滑动调值的圆环</a></h1>
	

	<div class="post-content"><div>
<div><a href="http://photo.blog.sina.com.cn/showpic.html#blogid=&amp;url=http://album.sina.com.cn/pic/002o3oc9zy6QICyfM1r01" target="_blank"><img title="" src="http://s2.sinaimg.cn/mw690/002o3oc9zy6QICyfM1r01" alt="" /></a></div>
</div>
<p>前一篇关于滑动圆盘的代码，因为没有在手机上测试，代码有些错误，这次做了修正</p>
<p>package com.example.administrator.sildecircle;</p>
<p>import android.content.Context;</p>
<p>import android.graphics.Canvas;</p>
<p>import android.graphics.Color;</p>
<p>import android.graphics.Paint;</p>
<p>import android.util.AttributeSet;</p>
<p>import android.util.Log;</p>
<p>import android.view.MotionEvent;</p>
<p>import android.view.View;</p>
<p>public class SildeCircle extends View {</p>
<p>Canvas canvas;</p>
<p>Context context;</p>
<p>float cx;</p>
<p>float cy;</p>
<p>float r=205;</p>
<p>float downx=0;</p>
<p>float downy=0;</p>
<p>public SildeCircle(Context context, AttributeSet attrs) {</p>
<p>super(context, attrs);</p>
<p>this.context=context;</p>
<p>}</p>
<p>public SildeCircle(Context context, AttributeSet attrs, int defStyleAttr) {</p>
<p>super(context, attrs, defStyleAttr);</p>
<p>this.context=context;</p>
<p>}</p>
<p>public SildeCircle(Context context) {</p>
<p>super(context);</p>
<p>this.context=context;</p>
<p>}</p>
<p>@Override</p>
<p>protected void onDraw(Canvas canvas) {</p>
<p>super.onDraw(canvas);</p>
<p>this.canvas=canvas;</p>
<p>int w=getWidth();</p>
<p>int h=getHeight();</p>
<p>cx=(float)(w/2+r*(downx-w/2)/(Math.sqrt(Math.pow(h/2-downy,2)+Math.pow(downx-w/2,2))));</p>
<p>cy=(float)(h/2-r*(h/2-downy)/(Math.sqrt(Math.pow(h/2-downy,2)+Math.pow(downx-w/2,2))));</p>
<p>Log.d("onDraw",cx+"   "+cy);</p>
<p>myDrawCircle(canvas,w/2,h/2,250,Color.GREEN);</p>
<p>myDrawCircle(canvas,w/2,h/2,160,Color.WHITE);</p>
<p>myDrawCircle(canvas,cx,cy,45,Color.WHITE);</p>
<p>this.setOnTouchListener(new OnTouchListener() {</p>
<p>@Override</p>
<p>public boolean onTouch(View v, MotionEvent event) {</p>
<p>downx=event.getX();</p>
<p>downy=event.getY();</p>
<p>SildeCircle.this.invalidate();</p>
<p>Log.d("On Touch ",downx+"   "+downy);</p>
<p>return true;</p>
<p>}</p>
<p>});</p>
<p>}</p>
<p>private void myDrawCircle(Canvas canvas,float cx,float cy,float radius,int color)</p>
<p>{</p>
<p>Paint paint=new Paint();</p>
<p>paint.setColor(color);</p>
<p>canvas.drawCircle(cx,cy,radius,paint);</p>
<p>}</p>
<p>}</p>
</div>

	<p class="meta">Posted on <span class="postdate">Nov 14, 2016</span></p>

</article>
    </div>



  </div>



  <footer id="footer">
    <p class="copyright">Copyright &copy; 2017 Solar Theme. Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme by <a href="http://www.webmaster-source.com">Matt Harzewski</a></p>
  </footer>



  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
  <script src="/assets/js/jquery.mobilemenu.min.js"></script>

  <script>
    $(document).ready(function(){
      $('#sidebar nav ul').mobileMenu({'topOptionText': 'Menu', 'prependTo': '#sidebar nav'});
    });
  </script>



</body>
</html>